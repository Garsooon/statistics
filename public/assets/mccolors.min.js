"use strict"
function motdtocolor(originmotd, oe) {
	if (originmotd.search('ยง') != -1 || originmotd.search('&') != -1) {
		var reg = /(^)?([^(ยง|&)]+)($)?/g;
		var outputspan = document.createElement('span');
		var len = originmotd.match(reg);

		if(!len) {
			// fuck apple
		return oe;
		}
		else {
		len = len.length;
		}
		var output = '';
		
		for (var i=0; i<len; i++) {
			var aa = originmotd.match(reg)[i];
			var a1 = aa.substring(0,1);
			var aa = aa.substr(1);
			var style = functioncolor(a1);
			var motdtext = '';
			
			if (aa.length >= 1) {
				var motdtext = document.createTextNode(aa);
			}
			else {
				var motdtext = document.createTextNode('');
			}
			
			if (style.substring(0,1) == '#') {
				outputspan.style.color = style;
				outputspan.style.textDecoration = "none";
				outputspan.style.fontStyle = "normal";
			}
			
			
			
			else if (style == 'line-through') {
				outputspan.style.textDecoration = style;
			}
			else if (style == 'underline') {
				outputspan.style.textDecoration = style;
			}
			else if (style == 'italic') {
				outputspan.style.fontStyle = style;
			}
			else if (style == 'none') {
				outputspan.style.color = "#000000";
				outputspan.style.textDecoration = "none";
				outputspan.style.fontStyle = "normal";
			}
			var spanlen = outputspan.childNodes.length;
			for(var z=0; z< spanlen; z++) {
			    outputspan.removeChild(outputspan.childNodes[0]);
			}
			outputspan.style.whiteSpace = 'pre';
			outputspan.appendChild(motdtext);
			var output = output + outputspan.outerHTML;
		}
		

		var output = output.replace(/\\n/g,"<br>");
		return output;
		
		function functioncolor(colorcod) {
			if (colorcod == 'a') {
				return '#55ff55';
			}
			else if (colorcod == 'b') {
				return '#55ffff';
			}
			else if (colorcod == 'c') {
				return '#ff5555';
			}
			else if (colorcod == 'd') {
				return '#ff55ff';
			}
			else if (colorcod == 'e') {
				return '#ffff55';
			}
			else if (colorcod == 'f') {
				return '#ffffff';
			}
			else if (colorcod == 'g') {
				return '#ddd605';
			}
			else if (colorcod == '0') {
				return '#000000';
			}
			else if (colorcod == '1') {
				return '#0000aa';
			}
			else if (colorcod == '2') {
				return '#00aa00';
			}
			else if (colorcod == '3') {
				return '#00aaaa';
			}
			else if (colorcod == '4') {
				return '#aa0000';
			}
			else if (colorcod == '5') {
				return '#aa00aa';
			}
			else if (colorcod == '6') {
				return '#ffaa00';
			}
			else if (colorcod == '7') {
				return '#aaaaaa';
			}
			else if (colorcod == '8') {
				return '#555555';
			}
			else if (colorcod == '9') {
				return '#5555ff';
			}
			else if (colorcod == 'k') {
				return 'bold';
			}
			else if (colorcod == 'l') {
				return 'bold';
			}
			else if (colorcod == 'm') {
				return 'line-through';
			}
			else if (colorcod == 'n') {
				return 'underline';
			}
			else if (colorcod == 'o') {
				return 'italic';
			}
			else if (colorcod == 'r') {
				return 'none';
			}
			else {
				return 'unknown style';
			}
		}
		
	}
	else {
		return originmotd;
	}
}
